# Phases
# hogehoge
## phase 0

初期設定。各センサを初期化します。

## phase 1

放出判定を行います。  
放出判定条件。以下のうちどちらかを満たせばOK。  
- ジャンパピン（フライトピン）が外れている and 光を 10 秒間  検知し続ける
- 光を 30 秒間検知し続ける  

光センサ（CdSセル）は明るいほど小さい値，暗いほど大きい値をとります。とりあえず光を検知したとみなす閾値としては 400 を採用しました。値を取る頻度は 0.3 秒ごととしました。

## phase 2

着地判定を行います。  
着地判定条件。以下のうちどちらかを満たせばOK。  
- 8 秒間，気圧変化が 0.1 hPa以内で，高度変化が 0.2 m以内
- 放出判定から 30 秒間経過  

気圧は気圧センサーから，高度はGPSから取ります。気圧，高度をリストへ append していき，次にとった値と，そのリストの平均値の差の絶対値を取ります。その値が，「気圧変化が 0.1 hPa以内で，高度変化が 0.2 m以内」を満たしていなければ，リストをリセットして，作り直し，また append していきます。上を満たしていることが 8 秒間確認できればこれを着地とみなします。とはいえ，GPSの高度は（何故か）下がり続けるため，一つ目の条件がなかなか満たせないことを考慮して，放出判定から 30 秒経過時点でこれを着地とみなします。センサの値を取る頻度は，phase 1 と同じ 0.3 秒としています。

## phase 3  

ニクロム線による溶断を行います。  
着地判定が確認でき次第，Arduino のニクロム線用のピンの電圧を off にすることでニクロム線に電流が流れ，発熱します。この発熱を利用してナイロン線を溶断，cansat 本体とパラシュート & 展開機構を分断します。

## phase 4 
キャリブレーションを行います。  
キャリブレーションに関しては[ 9 軸センサのドキュメント](https://github.com/tossyy/cansat2022/blob/master/documents/9ax_doc.md)を参照してください。

## phase 5 
GPS走行を行います。

