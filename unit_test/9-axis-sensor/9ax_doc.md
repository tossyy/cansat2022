# 9軸センサドキュメント
## 参考にしたサイト
[Rasperry Pi 3で9軸センサ(BMX055)を使う](https://qiita.com/hiro-han/items/ca881a6c76559af9f57a)  
[ラズパイでBMX055の使い方と地磁気などのセンサ値を取得してみた](https://taku-info.com/bmx055howtouse-mag/)


## いろいろ
今回用いたのはBMX055。  
9軸センサーには, 加速度センサとジャイロセンサ（角速度）と地磁気センサがついています。どこをはんだづけするかによって入出力電圧と各センサのアドレスが変わります。今回はJP7を半田付した。この時は, 加速度の読み取りのアドレスは0x19, 加速度のレジスタのアドレスは0x02~, ジャイロの読み取りのアドレスは0x69, ジャイロのレジスタのアドレスは0x02~, 地磁気の読み取りアドレスは0x13, 地磁気のレジスタのアドレスは0x42~となっている。I2C通信を行うので, I2Cドキュメントに従ってコンフィグを変更する。

## 配線
|  マスター<br>(ラズパイ側)  |  9軸  |
| ---- | ---- |
|  5V  |  VCC  |
|  GND  |  GND  |
|  SDA(GPIO2)  |  SDA  |
|  SCL(GPIO3)  |  SCL  |

## 使用方法

配線が完了したら, `sudo i2cdetect -y 1`で接続されているか確認しておく。上手く検出されればアドレスが分かる。  
[BMX055 Datasheet](https://www.mouser.jp/datasheet/2/783/BST_BMX055_DS000-1509552.pdf)から値の出力方法を調べるが, 英語読めないししんどいので, コードをそのまま移して解読した方が多分楽。  
[Rasperry Pi 3で9軸センサ(BMX055)を使う](https://qiita.com/hiro-han/items/ca881a6c76559af9f57a)から引用すると  
> 例えばz方向の加速度であれば、以下のように取得します。
> 
> 加速度の値は12bitであり、レジスタアドレス0x06と0x07に分割して格納されています。
0x06の4~7bit目に加速度の下位4bitが、0x07に上位8bitが格納されています。
そのため、0x07の値と、0x06の4~7bit目の値を組み合わせる必要があります。
> 
> また、0x06には、0bit目には新しいデータかどうかを示すフラグが格納されています。
> 
> 加速度の値は12bitですが、符号付き整数なので先頭の1bitは正負の符号です。
よって値域は -2048~2047 となります。
先頭bitが1のとき、2の補数を計算して負数にしてもいいのですが、
値が2048以上の場合は4096を引いて負の値に変換するほうが簡単です。
> 
> ここまでで求めた値はまだ物理値ではありません。
例えば、ここまでで求めた値が1であったからといって、加速度は1[m/s]ではありません。
レジスタアドレス0x0Fには値のレンジ設定が格納されており、デフォルト値は0x03なので
取得できる値のレンジは+/- 2gでLSBは0.00098[g]です。
つまり、レジスタから読み取った値が1であったとすると、それは0.00098[g]を意味するため、0.00098をかける必要があります。
また、[m/s^2]で使いたいなら、さらに9.8をかける必要があります。  

のようにして各物理量を求めるらしい。(むずい！)



